var remove_from_pull_list=function(){$("#user-pull-list li").each(function(){var e=$(this),t=$(this).children("i"),n=e.attr("data-id");t.click(function(){$.post("/ajax/remove_from_pull_list",{id:n}).done(function(t){t.status=="success"&&e.remove()})})})},add_to_pull_list=function(){$("#submit_pull").click(function(){var e=$("input#csrf_token").val(),t=$("input#title").val();$.post("/ajax/add_to_pull_list",{csrf_token:e,title:t}).done(function(e){if(e.status=="success"){$("#user-pull-list").append('<li class="list-group-item" data-id='+e.data.title_id+' data-name="'+e.data.title+'" >'+e.data.title+'<i class="fa fa-times pull-right remove-button"></i></li>');$("input#title").val("");$(".typeahead").typeahead("val","");$(".alert-box").append('<div class="alert alert-success alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><strong>'+e.data.title+"</strong> has been added to your Pull List!</div>");remove_from_pull_list()}else if(e.status=="fail"){$("input#title").val("");$(".typeahead").typeahead("val","");$(".alert-box").append('<div class="alert alert-warning alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>'+e.message+"</div>")}else{$("input#title").val("");$(".alert-box").append('<div class="alert alert-danger alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">Something went wrong!</div>')}}).fail(function(e){});return!1})},titles=new Bloodhound({datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.title)},queryTokenizer:Bloodhound.tokenizers.whitespace,prefetch:"/ajax/typeahead"});titles.initialize();var suggestion_template=Handlebars.compile(['<p class="suggest-publisher">{{publisher}}</p>','<p class="suggest-title">{{title}}</p>','<p class="suggest-description">0 Subscribers</p>'].join(""));$(".typeahead").typeahead(null,{name:"titles",displayKey:"title",source:titles.ttAdapter(),templates:{suggestion:suggestion_template}});add_to_pull_list();remove_from_pull_list();